<?xml version='1.0' encoding='utf-8'?>

<scene version="0.5.0">
	<include filename="hand_mat.xml"/>
	<include filename="lighting.xml"/>


	<!-- BSDF -->
	<bsdf type="mask" id="salvator_mask">
		<bsdf type="diffuse">
			<texture name="reflectance" type="bitmap">
				<float name="gamma" value="3"/>
				<string name="filename" value="textures/Salvator_Mundi_modified.jpg"/>
			</texture>
		</bsdf>

		<texture name="opacity" type="bitmap">
			<string name="filename" value="textures/Salvator_Mundi_mask.jpg"/>
		</texture>
	</bsdf>

	<bsdf type="thindielectric" id="thindielectric">
		<float name="intIOR" value="1.51714"/>
		<float name="extIOR" value="1.0"/>
	</bsdf>

	<medium type="homogeneous" id="medium">
		<rgb name="sigmaS" value="0,0,0"/>
		<rgb name="sigmaA" value="3,3,3"/>
	</medium>

	<!-- object  -->
	<shape type="sphere">
		<float name="radius" value="6.798"/>
		<ref id="thindielectric"/>		
		<ref id="medium" name="interior"/>
	</shape>

	<shape type="sphere" id="interior_sphere">
		<float name="radius" value="6.6620"/>
		<boolean name="flipNormals" value="true"/>
		<ref id="medium" name="interior"/>
	</shape>

	<shape type="obj" id="theSalvatorMundi">
		<string name="filename" value="objects/portrait.obj"/>
		<ref id="salvator_mask"/>
		<transform name="toWorld">
		  <translate x="-30" y="21.85" z="14.45"/>
		</transform>
	</shape>

	<shape type="obj" id="background">
		<string name="filename" value="objects/background.obj"/>
		<bsdf type="diffuse"><srgb name="reflectance" value="#000000"/></bsdf>
		<transform name="toWorld">
		  <translate x="-30" y="22.05" z="14.2"/>
		</transform>
	</shape>

	<shape type="obj" id="lefthand">
		<string name="filename" value="objects/lefthand.obj"/>
		<ref id="hand_mix"/>
		<transform name="toWorld">
			<translate x="-34.4268" y="21.90" z="14.4124"/>
		</transform>
	</shape>



	<!-- Specular Reflection -->
	<!-- Relfection A -->
	<shape id="A_front_light" type="sphere">
		<float name="radius" value="1"/>
		<emitter type="area">
			<spectrum name="radiance" value="20"/>
	 	</emitter> 
		<transform name="toWorld">
			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

            <lookat target="5.8765,1.0341,3.2574" origin="55.3279,27.3345,86.0997" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="A_front_reflector" type="obj">
		<string name="filename" value="objects/ellipsoid45_5disk.obj"/>
		<bsdf type="conductor"><string name="material" value="none"/></bsdf>
		<transform name="toWorld">
			<translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

		 	<lookat target="5.8765,1.0341,3.2574" origin="55.3279,27.3345,86.0997" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="A_front_blocker" type="obj">
		<string name="filename" value="objects/lgblocker0.1.obj"/>
		<bsdf type="diffuse"><srgb name="reflectance" value="#000000"/></bsdf>
		<transform name="toWorld">
			<scale value="2"/>
            <rotate x="1" angle="90"/>
            <rotate y="1" angle="45"/>
			
			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>
            <lookat target="5.8765,1.0341,3.2574" origin="55.3279,27.3345,86.0997" up="0,1,0"/>
		</transform>
	</shape>

	<!-- Relfection B -->
	<shape id="B_front_light" type="sphere">
		<float name="radius" value="1"/>
		<emitter type="area">
			<spectrum name="radiance" value="20"/>
	 	</emitter> 
		<transform name="toWorld">
			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

            <lookat target="6.6934,0.8285,0.8515" origin="100.5850,24.8272,25.5176" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="B_front_reflector" type="obj">
		<string name="filename" value="objects/ellipsoid45_5disk.obj"/>
		<bsdf type="conductor"><string name="material" value="none"/></bsdf>
		<transform name="toWorld">
			<translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

		 	<lookat target="6.6934,0.8285,0.8515" origin="100.5850,24.8272,25.5176" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="B_front_blocker" type="obj">
		<string name="filename" value="objects/lgblocker0.1.obj"/>
		<bsdf type="diffuse"><srgb name="reflectance" value="#000000"/></bsdf>
		<transform name="toWorld">
			<scale value="2"/>
            <rotate x="1" angle="90"/>
            <rotate y="1" angle="45"/>

			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

            <lookat target="6.6934,0.8285,0.8515" origin="100.5850,24.8272,25.5176" up="0,1,0"/>
		</transform>
	</shape>

	<!-- Relfection C -->
	<shape id="C_front_light" type="sphere">
		<float name="radius" value="1"/>
		<emitter type="area">
			<spectrum name="radiance" value="20"/>
	 	</emitter> 
		<transform name="toWorld">
			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>
            <lookat target="6.4495,-2.1007,0.4510" origin="86.4710,-60.7360,13.0393" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="C_front_reflector" type="obj">
		<string name="filename" value="objects/ellipsoid45_5disk.obj"/>
		<bsdf type="conductor"><string name="material" value="none"/></bsdf>
		<transform name="toWorld">
			<translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>

		 	<lookat target="6.4495,-2.1007,0.4510" origin="86.4710,-60.7360,13.0393" up="0,1,0"/>
		</transform>
	</shape>

	<shape id="C_front_blocker" type="obj">
		<string name="filename" value="objects/lgblocker0.1.obj"/>
		<bsdf type="diffuse"><srgb name="reflectance" value="#000000"/></bsdf>
		<transform name="toWorld">
			<scale value="2"/>
            <rotate x="1" angle="90"/>
            <rotate y="1" angle="45"/>
            
			<translate x="1.4" y="0" z="1.4"/>

            <translate x="0" y="0" z="-100"/>
            <rotate y="1" angle="-6.9574"/>
            <translate x="0" y="0" z="100"/>
            <lookat target="6.4495,-2.1007,0.4510" origin="86.4710,-60.7360,13.0393" up="0,1,0"/>
		</transform>
	</shape>



	<!--  Camera  -->
	<sensor type="orthographic" >		
		<transform name="toWorld">
			<scale value="22.5"/>
			<lookat target="0,21.85,14.45" origin="90,21.85,14.45" up="0,1,0"/>
		</transform>

 		<film type="hdrfilm">		  
			<integer name="height" value="2428"/>
			<integer name="width" value="1650"/>

			<rfilter type="gaussian"/>
			<boolean name="banner" value="false"/>
		</film>

		<sampler type="independent">
			<integer name="sampleCount" value="1024"/>
		</sampler>
	</sensor>

	<integrator type="volpath"/>

</scene>
